import { RequestDetails, TracePolicy } from './config';
/**
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * An enumeration of the different possible types of behavior when dealing with
 * incoming trace context. Requests are still subject to local tracing policy.
 */
export declare enum TraceContextHeaderBehavior {
    /**
     * Respect the trace context header if it exists; otherwise, trace the
     * request as a new trace.
     */
    DEFAULT = "default",
    /**
     * Respect the trace context header if it exists; otherwise, treat the
     * request as unsampled and don't trace it.
     */
    REQUIRE = "require",
    /**
     * Trace every request as a new trace, even if trace context exists.
     */
    IGNORE = "ignore"
}
/**
 * Options for constructing a TracePolicy instance.
 */
export interface TracePolicyConfig {
    /**
     * A field that controls time-based sampling.
     */
    samplingRate: number;
    /**
     * A field that controls a url-based filter.
     */
    ignoreUrls: Array<string | RegExp>;
    /**
     * A field that controls a method filter.
     */
    ignoreMethods: string[];
    /**
     * A field that controls filtering based on incoming trace context.
     */
    contextHeaderBehavior: TraceContextHeaderBehavior;
}
/**
 * A class that makes decisions about whether a trace should be created.
 */
export declare class BuiltinTracePolicy implements TracePolicy {
    private readonly sampler;
    private readonly urlFilter;
    private readonly methodsFilter;
    private readonly contextHeaderFilter;
    /**
     * Constructs a new TracePolicy instance.
     * @param config Configuration for the TracePolicy instance.
     */
    constructor(config: TracePolicyConfig);
    /**
     * Given a timestamp and URL, decides if a trace should be created.
     * @param options Fields that help determine whether a trace should be
     *                created.
     */
    shouldTrace(options: RequestDetails): boolean;
}
export declare function alwaysTrace(): BuiltinTracePolicy;
export declare function neverTrace(): BuiltinTracePolicy;
